<script>
    async function create(path, importObject) {
    const bytes = await window.fetch(path).then(x => x.arrayBuffer());
    return WebAssembly.instantiate(bytes, importObject);
  }

  const info = {
    'env': {
      // 'ABORT': 0,
      // 'DYNAMICTOP_PTR': 2064,
      'abortStackOverflow': _ => {
        throw new Error('overflow');
      },
      'STACKTOP': 0,
      'STACK_MAX': 5244960,
      'tableBase': 0,
      'memoryBase': 1024,
      'table': new WebAssembly.Table({initial: 0, maximum: 0, element: "anyfunc"}),
      'memory': new WebAssembly.Memory({initial: 256, maximum: 256}),
    },
  };

  create('output.wasm', info).then(thing => {
    console.info('got thing', thing);

    console.info('answer', thing.instance.exports._myFunction());
    console.info('answer', thing.instance.exports._myFunction());
    console.info('answer', thing.instance.exports._myFunction());
    console.info('answer', thing.instance.exports._myFunction());
  });

</script>