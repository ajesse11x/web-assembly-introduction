<script>
    async function create(path, importObject) {
    const bytes = await window.fetch(path).then(x => x.arrayBuffer());
    return WebAssembly.instantiate(bytes, importObject);
  }

  const env = {
    // 'ABORT': 0,
    // 'DYNAMICTOP_PTR': 2064,
    'STACKTOP': 0,
    'STACK_MAX': 5244960,
    'abortStackOverflow': _ => {
      throw new Error('overflow');
    },
    'tableBase': 0,
    'memoryBase': 1024,
    'table': new WebAssembly.Table({initial: 0, maximum: 0, element: "anyfunc"}),
    'memory': new WebAssembly.Memory({initial: 256, maximum: 256}),
  };

  env['_print'] = arg => console.info('logging', arg);

  create('output.wasm', {env}).then(thing => {
    const o = thing.instance.exports;

    let out = o._myFunction(123);
    console.info('got', out);
  });

</script>